# 广告追踪前端模块

基于设计文档完成的广告追踪系统前端实现。

## 📁 目录结构

```
frontend/src/
├── views/ad-tracking/
│   ├── index.vue                          # 主页面容器
│   ├── components/
│   │   ├── StatisticsPanel.vue            # 统计仪表板
│   │   ├── FilterPanel.vue                # 筛选面板
│   │   ├── AdList.vue                     # 广告列表
│   │   └── DetailDrawer.vue               # 详情侧边栏
│   └── README.md                          # 本文件
├── api/
│   └── adTracking.ts                      # 广告追踪 API 服务
├── store/modules/
│   └── adTracking.ts                      # Pinia 状态管理
└── types/
    └── adTracking.ts                      # TypeScript 类型定义
```

## ✅ 已完成功能

### 1. TypeScript 类型定义 (`types/adTracking.ts`)
- ✅ 完整的枚举类型（ContentType、SourceType）
- ✅ 数据模型类型（AdTracking、AdTrackingDetail）
- ✅ API 请求/响应类型
- ✅ UI 状态类型（FilterConditions、Pagination）

### 2. API 服务层 (`api/adTracking.ts`)
- ✅ 完整的 REST API 封装
- ✅ 9个API方法：列表、详情、搜索、统计、任务管理、标签管理等
- ✅ 类型安全的请求和响应

### 3. 状态管理 (`store/modules/adTracking.ts`)
- ✅ Pinia store 实现
- ✅ 完整的状态管理（列表、详情、统计、筛选、分页）
- ✅ 所有业务逻辑封装
- ✅ 错误处理和用户提示

### 4. 统计仪表板 (`StatisticsPanel.vue`)
- ✅ 4个统计卡片（总记录数、出现次数、用户数、群组数）
- ✅ 3个ECharts图表（内容类型饼图、来源类型饼图、Top用户柱状图）
- ✅ 渐变色图标设计
- ✅ 响应式布局

### 5. 筛选面板 (`FilterPanel.vue`)
- ✅ 基础筛选：内容类型、来源类型、标签、时间范围、关键词、排序
- ✅ 高级筛选：用户ID、群组ID、域名（可折叠）
- ✅ 时间快捷选项（今天、最近7天、最近30天）
- ✅ 重置和清空筛选功能
- ✅ 标签联动加载

### 6. 广告列表 (`AdList.vue`)
- ✅ 表格展示（序号、内容、类型、来源、标签、次数、时间）
- ✅ 类型标签着色
- ✅ 标签折叠显示（超过2个显示"+N"）
- ✅ 点击行查看详情
- ✅ 分页功能
- ✅ 删除操作（带确认）

### 7. 详情侧边栏 (`DetailDrawer.vue`)
- ✅ 抽屉式设计（600px宽度）
- ✅ 基本信息展示（内容、类型、时间、次数）
- ✅ 来源信息展示（用户、群组）
- ✅ 额外信息展示（域名、网站标题、IP位置）
- ✅ 标签管理（添加、删除）
- ✅ 复制内容功能
- ✅ 删除记录功能

### 8. 主页面 (`index.vue`)
- ✅ 纵向三段式布局
- ✅ 组件整合与数据流管理
- ✅ 生命周期钩子（自动加载数据）
- ✅ 响应式设计

### 9. 路由配置
- ✅ 路由注册 (`/ad-tracking`)
- ✅ 导航菜单配置（位于"变动分析"和"数据大屏"之间）
- ✅ 图标：Warning

## 🎨 设计亮点

1. **完整的类型安全**：全程使用 TypeScript，避免运行时错误
2. **模块化组件设计**：每个功能模块独立封装，易维护
3. **状态集中管理**：使用 Pinia 统一管理状态，数据流清晰
4. **响应式布局**：适配桌面端、平板、移动端
5. **用户体验优化**：
   - 加载状态提示
   - 操作确认对话框
   - 成功/失败消息提示
   - 一键复制功能
   - 标签折叠显示

6. **数据可视化**：ECharts 图表展示统计数据

## 🚀 使用方式

### 访问页面
```
http://localhost:8930/ad-tracking
```

### 主要操作流程

1. **查看统计**：页面顶部自动加载统计仪表板
2. **筛选数据**：使用筛选面板设置条件，点击"搜索"
3. **查看列表**：浏览广告追踪记录
4. **查看详情**：点击列表行或"查看详情"按钮
5. **管理标签**：在详情侧边栏添加或删除标签
6. **删除记录**：列表或详情页删除不需要的记录

## 📝 技术栈

- **框架**: Vue 3.5 + TypeScript 5.7
- **UI组件**: Element Plus 2.11
- **图表**: ECharts 5.5 + vue-echarts 7.0
- **状态管理**: Pinia 2.3
- **HTTP客户端**: Axios 1.7
- **日期处理**: dayjs 1.11
- **构建工具**: Vite 6.0

## 🔧 待优化项

1. **性能优化**：
   - 列表虚拟滚动（数据量大时）
   - 图片懒加载
   - 请求防抖优化

2. **功能增强**：
   - WebSocket 实时推送新记录
   - 导出功能（Excel/CSV）
   - 批量操作（批量删除、批量打标签）
   - 高级搜索（正则表达式）

3. **UI优化**：
   - 暗色主题支持
   - 自定义列显示
   - 拖拽排序

4. **数据可视化增强**：
   - 时间趋势图
   - Top域名排行
   - 传播路径图谱

## 🐛 已知问题

1. 标签显示暂时只显示ID，需要关联标签表获取名称和颜色
2. 来源图标组件引用语法需要调整（`<el-icon><{{ icon }} /></el-icon>` 应改为动态组件）

## 📚 相关文档

- [广告追踪系统功能实现](../../../docs/features/ad-tracking-system.md)
- [广告追踪 REST API 文档](../../../docs/api/ad-tracking-rest-api.md)
- [TmeSpider API 文档](../../../docs/api/ad-tracking-api.md)

## 👥 开发信息

- **开发日期**: 2025-10-06
- **开发者**: Claude Code
- **版本**: v1.0.0
